var c=Object.defineProperty;var u=(a,n,t)=>n in a?c(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t;var l=(a,n,t)=>(u(a,typeof n!="symbol"?n+"":n,t),t);import{aV as p,aW as w,aX as f,aY as S,G as k,aZ as d,a_ as g,a$ as m,b0 as B,b1 as G,b2 as R,b3 as A,ax as b,f as y,b4 as J,b5 as L}from"./index.ca3d1873.js";const Q=()=>{const a=new p;return a.texture="data:image/png;base64,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",w.delete(a),a.scale=.5,a};class z extends f{constructor(t,o){const h=new k;super(h);l(this,"lightState",new S(void 0));l(this,"defaultShadowResolution",512);l(this,"helperState",new S(!0));l(this,"shadowResolutionState",new S(void 0));this.createEffect(()=>{var i,r;const e=new t;if(this.lightState.set(e),h.add(e),e.shadow){const s=(r=(i=this.shadowResolutionState.get())!=null?i:d())!=null?r:this.defaultShadowResolution;e.castShadow=!0,e.shadow.bias=-5e-4,e.shadow.mapSize.width=s,e.shadow.mapSize.height=s,e.shadow.radius=2}return()=>{h.remove(e),e.dispose()}},[this.shadowResolutionState.get,d]),this.createEffect(()=>{const e=this.lightState.get();if(g()!==m||!this.helperState.get()||!e)return;const i=new B,r=Q();if(i.watch(G(({target:s})=>{s===r&&R(this)})),o){const s=new o(e);A.add(s),s.add(r.outerObject3d),"update"in s&&i.watch(b(()=>{s.update()})),i.then(()=>{s.dispose(),A.remove(s)})}else this.outerObject3d.add(r.outerObject3d);return()=>{r.dispose(),i.cancel()}},[g,this.helperState.get,this.lightState.get])}get helper(){return this.helperState.get()}set helper(t){this.helperState.set(t)}get shadowResolution(){return this.shadowResolutionState.get()}set shadowResolution(t){this.shadowResolutionState.set(t)}get color(){const t=this.lightState.get();return t?"#"+t.color.getHexString():"#ffffff"}set color(t){this.cancelHandle("color",()=>this.lightState.get(o=>o&&(o.color=new y(t))))}get intensity(){const t=this.lightState.get();return t?t.intensity:1}set intensity(t){this.cancelHandle("intensity",()=>this.lightState.get(o=>o&&(o.intensity=t)))}}const v={...J,color:String,intensity:Number,shadowResolution:Number,helper:Boolean},D={...L,color:"#ffffff",intensity:1,shadowResolution:[void 0,512],helper:!0};export{z as L,D as a,v as l};
